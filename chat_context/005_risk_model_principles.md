# Mirano — Risk Model Principles

## 1. Назначение документа

Этот документ фиксирует принципы того, **как Mirano считает и объясняет риск**.

Задачи:

* дать единый язык для команды и AI-ассистентов
* избежать «магических» и юридически опасных формулировок
* описать, что такое **risk_score**, **confidence**, категории риска и правила агрегации
* обеспечить воспроизводимость и развитие модели без ломки продукта

Ключевой тезис:

> Mirano оценивает риск как **вероятностный сигнал на основании фактов**, а не как утверждение о нарушениях.

---

## 2. Базовые определения

### 2.1 Risk

**Риск** — это оценка вероятности того, что у пользователя возникнут проблемы (финансовые/юридические/сроки/качество/нервы) при сделке или владении объектом.

Риск в Mirano:

* не означает вину
* не означает незаконность
* не является доказательством

### 2.2 Risk Score

**risk_score (0–100)** — агрегированный числовой показатель, рассчитанный на основе набора фактов.

Понимание шкалы:

* 0–20: низкий риск / мало негативных сигналов
* 21–40: умеренный риск / есть отдельные сигналы
* 41–60: повышенный риск / несколько значимых сигналов
* 61–80: высокий риск / множество сильных сигналов
* 81–100: критический риск / сочетание сильных сигналов

Важно: шкала — UX-инструмент, а не юридическая классификация.

### 2.3 Confidence

**confidence (low/medium/high)** — уровень уверенности модели в том, что собранный набор данных достаточно полный и сопоставление сущностей корректно.

Confidence отражает:

* полноту источников
* качество matching (адрес/ФИО/ИНН)
* согласованность сигналов

Confidence НЕ означает:

* «правильность» как гарантию
* «чистоту» сделки

### 2.4 Fact

**Fact** — атомарное утверждение, основанное на источнике, с evidence (почему мы считаем это фактом).

Примеры фактов:

* «Найдено арбитражное дело №… где ответчик: ООО …»
* «Обнаружено исполнительное производство на сумму …»
* «Объявление размещалось N раз за M дней»

---

## 3. Принципы интерпретации

### 3.1 Факты > выводы

Mirano всегда показывает:

* **что найдено**
* **где найдено**
* **когда найдено**

А интерпретация формулируется осторожно:

* «может указывать»
* «повышает вероятность»
* «является сигналом»

### 3.2 Контекст важнее единичного события

Один факт редко определяет риск.

Риск растёт:

* при повторяемости
* при системности
* при подтверждении несколькими источниками

### 3.3 Слабые сигналы не игнорируются, но и не доминируют

Отзывы, слухи, единичные упоминания:

* могут подсветить направление
* не должны перевешивать юридические факты

### 3.4 «Отсутствие данных» — это тоже сигнал

Если по ключевым источникам нет результатов:

* это может означать «чисто»
* или «не нашли из-за ограничений»

Поэтому отсутствие данных влияет на **confidence**.

---

## 4. Категории риска (Risk Categories)

Категории — это объясняемая структура результата.

Рекомендуемые категории MVP:

1. **Юридические споры / суды**

* дела по объекту
* дела по застройщику
* дела по продавцу (если применимо)

2. **Исполнительные производства / долги**

* ФССП (физлица/юрлица)

3. **Сигналы по застройщику**

* массовость исков
* повторяемость претензий

4. **Сигналы по объекту / дому**

* аномалии по объявлениям
* подозрительная история продаж

5. **Репутационные сигналы**

* отзывы
* жалобы

6. **Качество данных (confidence)**

* отдельная метрика, не категория, но отображается рядом

Категории могут расширяться.

---

## 5. Сигналы (Signals) и их сила

Mirano использует концепт **сигналов** — правил, которые преобразуют факты в вклад в риск.

Каждый сигнал имеет:

* ID (версия/название)
* категорию
* условия срабатывания
* базовый вес
* модификаторы (по давности, повторяемости, сумме и т.п.)
* объяснение (human-readable)

### 5.1 Примерные уровни силы сигнала

* **Weak**: единичный отзыв, косвенная аномалия
* **Medium**: одно судебное дело без деталей, один долг небольшой суммы
* **Strong**: множество дел, крупные суммы, повторяемые паттерны

---

## 6. Агрегация risk_score (концептуально)

### 6.1 Почему не «сумма всего подряд»

Если просто суммировать — модель будет взрываться на больших объектах и исторических данных.

Mirano использует нормализованную агрегацию:

* вклад сигналов ограничен (cap)
* повторения учитываются, но с diminishing returns
* категории имеют собственные лимиты

### 6.2 Общая формула (идея)

1. Сигналы → category_score
2. category_score → total_risk_score
3. total_risk_score корректируется с учётом confidence (мягко)

Важно: это описание принципа, а не точная математика.

---

## 7. Временной фактор (Recency)

Сигналы учитывают давность:

* свежие события обычно важнее
* но системные проблемы (повторяемость) важнее единичной свежести

Рекомендуемые правила:

* последние 6–12 месяцев имеют повышенный вес
* события старше 3–5 лет постепенно ослабляются

---

## 8. Повторяемость и паттерны

Risk усиливается, если:

* дела повторяются по одному типу
* истцы/ответчики совпадают
* есть серия исполнительных производств
* застройщик системно участвует в конфликтах

При этом важно:

* не штрафовать за «обычный бизнес-объём» без негативных исходов
* учитывать статус (закрыто/в процессе)

---

## 9. Matching и риск ошибок сопоставления

Основная зона риска для качества модели — **ошибки сопоставления сущностей**.

Правила:

* совпадение ФИО без доп. данных → снижает confidence
* совпадение ИНН/ОГРН → усиливает confidence
* совпадение адреса по ФИАС → усиливает confidence
* противоречивые результаты → снижают confidence

Mirano должен показывать:

* почему матч сработал
* насколько он надёжен

---

## 10. Confidence модель (концептуально)

Confidence можно считать как отдельную агрегированную метрику.

Факторы, повышающие confidence:

* покрытие ключевых источников (суды + ФИАС + объявления)
* наличие уникальных идентификаторов (кадастр, ИНН)
* подтверждение фактов несколькими источниками

Факторы, снижающие confidence:

* часть источников недоступна
* слишком общий ввод пользователя
* совпадения только по ФИО
* слишком много неоднозначностей

Вывод:

* risk_score всегда показывается вместе с confidence
* при low confidence формулировки становятся ещё осторожнее

---

## 11. Пороговые состояния и UX-подача

Mirano должен:

* показывать не только число, но и причины
* объяснять вклад категорий
* избегать «страшилок»

Рекомендуемые элементы подачи:

* шкала риска + метки диапазонов
* список «топ-3 причины»
* раскрываемые блоки с фактами и источниками
* блок «что это значит» + дисклеймер

---

## 12. Дисклеймеры и безопасные формулировки

### 12.1 Что нельзя писать

* «объект проблемный / мошеннический»
* «застройщик нарушает закон»
* «сделка незаконна»

### 12.2 Как можно писать

* «обнаружены судебные споры, это повышает риск задержек/разбирательств»
* «найдено исполнительное производство, это может указывать на финансовые сложности»
* «данные неполные, уверенность снижена»

---

## 13. Воспроизводимость и версии правил

Каждый расчёт должен быть воспроизводим:

* фиксируется набор фактов (snapshot)
* фиксируется версия правил Risk Engine
* фиксируются параметры (порог, веса)

Это важно для:

* доверия пользователя
* поддержки
* сравнения отчётов во времени

---

## 14. Расширение модели

Модель развивается через добавление:

* новых сигналов
* новых источников
* новых категорий

Правила расширения:

* новый сигнал сначала в режиме «observe» (не влияет на score)
* далее A/B или ручная валидация
* затем включение в расчёт

---

## 15. Как AI-ассистент должен применять risk-модель

AI-ассистент Mirano:

* говорит про риск как про вероятность
* опирается на факты и источники
* показывает uncertainty через confidence
* не делает юридических выводов
* предлагает next steps: «что проверить дополнительно»

Если в данных есть неоднозначность — ассистент обязан явно обозначить её.

---

## 16. Роль документа в chat_context

Этот файл — «конституция» того, как Mirano считает риск.

Если возникает вопрос:

> «Почему риск 57? Почему confidence medium?»

Ответ должен следовать принципам отсюда.
